<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>

<body>
    <%- include('partials/navbar') %>

        <!-- Flash Messages -->
        <div class="flash-messages">
            <% if (typeof error !=='undefined' && error && error.length> 0) { %>
                <div class="container" style="margin-top: var(--spacing-lg);">
                    <div class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i>
                        <%= error %>
                            <button class="alert-close" onclick="this.parentElement.remove()">
                                <i class="fas fa-times"></i>
                            </button>
                    </div>
                </div>
                <% } %>

                    <% if (typeof success !=='undefined' && success && success.length> 0) { %>
                        <div class="container" style="margin-top: var(--spacing-lg);">
                            <div class="alert alert-success">
                                <i class="fas fa-check-circle"></i>
                                <%= success %>
                                    <button class="alert-close" onclick="this.parentElement.remove()">
                                        <i class="fas fa-times"></i>
                                    </button>
                            </div>
                        </div>
                        <% } %>
        </div>

        <!-- Main Content -->
        <%- body %>

            <script>
                // Improved alert dismissal
                document.addEventListener('DOMContentLoaded', function () {
                    const alerts = document.querySelectorAll('.alert');

                    alerts.forEach(alert => {
                        // Auto-dismiss after 5 seconds
                        const autoDismiss = setTimeout(() => {
                            alert.style.opacity = '0';
                            setTimeout(() => {
                                if (alert.parentElement) {
                                    alert.remove();
                                }
                            }, 500);
                        }, 5000);

                        // Manual close button
                        const closeBtn = alert.querySelector('.alert-close');
                        if (closeBtn) {
                            closeBtn.addEventListener('click', () => {
                                clearTimeout(autoDismiss);
                                alert.style.opacity = '0';
                                setTimeout(() => {
                                    if (alert.parentElement) {
                                        alert.remove();
                                    }
                                }, 500);
                            });
                        }
                    });
                });
            </script>
</body>

</html>