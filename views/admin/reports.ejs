<div class="page-header">
    <h1><i class="fas fa-chart-bar me-2"></i>Reports & Analytics</h1>
    <p>View business performance and statistics</p>
</div>

<!-- Date Filter -->
<div class="card mb-3">
    <div class="card-body">
        <form class="flex gap-2 items-end">
            <div class="form-group mb-0">
                <label class="form-label text-sm">Date Range</label>
                <select class="form-control" id="dateRange">
                    <option value="today">Today</option>
                    <option value="week" selected>This Week</option>
                    <option value="month">This Month</option>
                    <option value="year">This Year</option>
                </select>
            </div>
            <button type="button" class="btn btn-primary" onclick="updateReports()">
                <i class="fas fa-sync me-1"></i>Update
            </button>
        </form>
    </div>
</div>

<!-- Stats Overview -->
<div class="grid grid-4 mb-3">
    <div class="card">
        <h6 class="text-muted mb-1">Total Revenue</h6>
        <h2 class="mb-0 text-gold">$12,450</h2>
        <small class="text-success"><i class="fas fa-arrow-up"></i> 12% vs last period</small>
    </div>
    <div class="card">
        <h6 class="text-muted mb-1">Appointments</h6>
        <h2 class="mb-0">145</h2>
        <small class="text-success"><i class="fas fa-arrow-up"></i> 5% vs last period</small>
    </div>
    <div class="card">
        <h6 class="text-muted mb-1">New Customers</h6>
        <h2 class="mb-0">28</h2>
        <small class="text-success"><i class="fas fa-arrow-up"></i> 8% vs last period</small>
    </div>
    <div class="card">
        <h6 class="text-muted mb-1">Avg. Rating</h6>
        <h2 class="mb-0">4.8</h2>
        <small class="text-muted">Based on 32 reviews</small>
    </div>
</div>

<!-- Charts -->
<div class="grid grid-2 gap-3 mb-3">
    <div class="card">
        <h3 class="mb-3">Revenue Trend</h3>
        <div id="revenueTrendChart" style="min-height: 300px;"></div>
    </div>
    <div class="card">
        <h3 class="mb-3">Popular Services</h3>
        <div id="servicesChart" style="min-height: 300px;"></div>
    </div>
</div>

<div class="grid grid-2 gap-3">
    <div class="card">
        <h3 class="mb-3">Appointments by Status</h3>
        <div id="statusDistChart" style="min-height: 300px;"></div>
    </div>
    <div class="card">
        <h3 class="mb-3">Top Barbers</h3>
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>Barber</th>
                        <th>Appointments</th>
                        <th>Revenue</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>John Doe</td>
                        <td>45</td>
                        <td>$2,250</td>
                    </tr>
                    <tr>
                        <td>Jane Smith</td>
                        <td>38</td>
                        <td>$1,900</td>
                    </tr>
                    <tr>
                        <td>Mike Johnson</td>
                        <td>32</td>
                        <td>$1,600</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Revenue Trend Chart
        const revenueOptions = {
            series: [{
                name: 'Revenue',
                data: [1200, 1900, 1500, 2100, 1800, 2500, 2200]
            }],
            chart: {
                type: 'area',
                height: 300,
                toolbar: { show: false },
                background: 'transparent'
            },
            theme: { mode: 'dark' },
            colors: ['#d4af37'],
            stroke: { curve: 'smooth', width: 2 },
            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 1,
                    opacityFrom: 0.7,
                    opacityTo: 0.1,
                    stops: [0, 90, 100]
                }
            },
            xaxis: {
                categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                labels: { style: { colors: '#a0a0a0' } }
            },
            yaxis: {
                labels: { style: { colors: '#a0a0a0' } }
            },
            grid: { borderColor: '#333' }
        };
        new ApexCharts(document.querySelector("#revenueTrendChart"), revenueOptions).render();

        // Services Chart
        const serviceOptions = {
            series: [{
                data: [400, 430, 448, 470, 540]
            }],
            chart: {
                type: 'bar',
                height: 300,
                toolbar: { show: false },
                background: 'transparent'
            },
            theme: { mode: 'dark' },
            colors: ['#8b5cf6'],
            plotOptions: {
                bar: {
                    borderRadius: 4,
                    horizontal: true,
                }
            },
            xaxis: {
                categories: ['Haircut', 'Beard Trim', 'Shave', 'Styling', 'Coloring'],
                labels: { style: { colors: '#a0a0a0' } }
            },
            yaxis: {
                labels: { style: { colors: '#a0a0a0' } }
            },
            grid: { borderColor: '#333' }
        };
        new ApexCharts(document.querySelector("#servicesChart"), serviceOptions).render();

        // Status Distribution Chart
        const statusOptions = {
            series: [44, 55, 13, 43],
            chart: {
                type: 'donut',
                height: 300,
                background: 'transparent'
            },
            theme: { mode: 'dark' },
            colors: ['#10b981', '#f59e0b', '#3b82f6', '#ef4444'],
            labels: ['Completed', 'Pending', 'In Progress', 'Cancelled'],
            legend: { position: 'bottom', labels: { colors: '#a0a0a0' } },
            stroke: { show: false }
        };
        new ApexCharts(document.querySelector("#statusDistChart"), statusOptions).render();
    });

    function updateReports() {
        // Logic to fetch new data based on date range
        alert('This would fetch updated data from the server.');
    }
</script>